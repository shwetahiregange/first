package com.javaTpoint;

import java.io.FileReader;

import org.springframework.beans.factory.annotation.Autowired;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;
@Controller

public class HomeController {

	@Autowired  

	private UserService userService;   
	@Autowired  
	private IdGenerService idGenerService;   

	@RequestMapping("/")  
public String home(){  
	return "index";  
}    
@RequestMapping("/generate")  
public String idGener(){  
	return "generate";  
} 


@RequestMapping(value="/Generate", method=RequestMethod.POST)  
public String addUsers(){  
	for(int i=0;i<=20;i++) {
		StudentStatus studentStatus=new StudentStatus();
		studentStatus.setId((int)i);
		studentStatus.setStatus(false);
		idGenerService.addUser(studentStatus);
	}
	return "successpage";  
}

@RequestMapping("/addstud")  
public String home1(ModelMap model){ 
	
	return "addstud";  
}

@RequestMapping(value="/Addition", method = RequestMethod.POST)  
public String addUser( int id,StudentName studentName)
{  
	StudentStatus updateRow= idGenerService.getUser(id);
       updateRow.setStatus(true);
       userService.addUser(studentName);
		idGenerService.addUser(updateRow); 
    	return "successpage";
}


@RequestMapping("/searchstud")  
public String home2(){  
	return "searchstud";  
}
@RequestMapping(value="/Search", method=RequestMethod.GET)  
public ModelAndView getUser(@RequestParam("id")int id, Model m){  

	m.addAttribute("ss", userService.getUser(id)) ;
	return new ModelAndView("studentsearch");
}  

@RequestMapping(value="/liststud", method = RequestMethod.GET)  
public ModelAndView getUsers(StudentName studentName,Model m){    
	m.addAttribute("tt", userService.getAllUsers());

	return new ModelAndView("liststud");
}

@RequestMapping(value="/deleteStud")  
public String delete(){  
	return "deleteStud";  
	}
   @RequestMapping(value="/Delete" ,method=RequestMethod.POST)  
public String deleteUser(int id){ 
	userService.delete(id);
	StudentStatus updateRow= idGenerService.getUser(id);
	updateRow.setStatus(false);
	idGenerService.addUser(updateRow);
	
	return "successpage";  
}

@RequestMapping(value="/updateStud")  
public String update(){  
	return "updateStud";  
}



@RequestMapping(value="/Update", method=RequestMethod.POST)  
public String updateUser(StudentName studentName){  
	StudentName updateRecord= userService.getUser(studentName.getId());
	updateRecord.setName(studentName.getName());
	userService.addUser(updateRecord);
	return "successpage";  
	}

@RequestMapping(value="/loadid")  
public String loadId(){  
	return "loadid";  
}
@RequestMapping(value="/Load", method = RequestMethod.POST)  
public FileReader fileId(FileReader reader)
{  
 
    	return reader;
}



}

